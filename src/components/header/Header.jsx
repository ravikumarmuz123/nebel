import React, { useState } from 'react'
import { Link, useNavigate } from 'react-router-dom'
import { useAuth } from '../../context/AuthContext'
import './Header.css'
import { images } from '../../assets/assetsManager'

const Header = () => {

    const navigate = useNavigate();
    const { user } = useAuth();

    const [searchTerm, setSearchTerm] = useState('');
    const submitSearch = (e) => {
        e.preventDefault()
        if(searchTerm.trim() !== '') {
            navigate(`/search?query=${encodeURIComponent(searchTerm.trim())}`)
        }
    }

    return (
        <header id="site-header">
            <div className="header_top_wrapper">
                <div className="container">
                    <div className="d-flex align-items-center justify-content-between">
                        <div className="header_top_left d-flex align-items-center gap-4">
                            <a href="tel:800-123-4567" className="d-flex align-items-center">
                                <svg width="12" height="16" viewBox="0 0 12 16" fill="none" xmlns="http://www.w3.org/2000/svg" className='mb-1'>
                                    <path d="M3.0383 1.06065L2.36592 1.26321C1.76723 1.44376 1.23257 1.79157 0.824879 2.26572C0.417187 2.73987 0.153426 3.32061 0.0646406 3.9396C-0.213876 5.8789 0.408801 8.14641 1.91016 10.7468C3.40778 13.3407 5.05637 15.0118 6.87095 15.7433C7.45398 15.9782 8.09223 16.0408 8.70981 15.9236C9.32739 15.8064 9.89833 15.5144 10.3547 15.0821L10.863 14.6001C11.1931 14.2878 11.3985 13.8662 11.4411 13.4138C11.4837 12.9613 11.3606 12.5088 11.0946 12.1404L9.82303 10.3774C9.65111 10.1393 9.40903 9.9611 9.13071 9.8676C8.85238 9.77409 8.55178 9.77002 8.27103 9.85596L6.34767 10.4439L6.29797 10.4533C6.08604 10.4843 5.59652 10.0257 4.98697 8.96977C4.34929 7.86508 4.21801 7.21896 4.39337 7.05204L5.37146 6.13959C5.72877 5.80594 5.97285 5.36894 6.06953 4.88972C6.16622 4.41051 6.11067 3.91305 5.91067 3.46696L5.28987 2.08751C5.1032 1.6724 4.77194 1.33934 4.35785 1.15041C3.94376 0.961483 3.47417 0.929582 3.0383 1.06065ZM4.4365 2.47199L5.05543 3.85145C5.17554 4.11901 5.20902 4.41742 5.15118 4.70495C5.09334 4.99247 4.94707 5.25472 4.73284 5.45503L3.75194 6.36841C3.12363 6.96295 3.33182 7.97762 4.17581 9.43865C4.96916 10.8134 5.69311 11.4924 6.47146 11.3742L6.58774 11.3498L8.5458 10.7525C8.63939 10.7237 8.73964 10.725 8.83247 10.7561C8.92531 10.7872 9.00607 10.8466 9.06344 10.926L10.3351 12.689C10.4682 12.8732 10.5299 13.0995 10.5087 13.3258C10.4875 13.5521 10.3848 13.763 10.2197 13.9193L9.7105 14.4013C9.38448 14.7099 8.97674 14.9183 8.53572 15.0019C8.0947 15.0856 7.63894 15.0408 7.22261 14.873C5.63028 14.2316 4.12517 12.7058 2.72321 10.278C1.3175 7.84445 0.748272 5.7748 0.993029 4.07276C1.05639 3.63054 1.24477 3.21562 1.53601 2.87687C1.82725 2.53811 2.20922 2.28962 2.63693 2.16065L3.30931 1.9581C3.5273 1.89259 3.76168 1.90861 3.96873 2.00316C4.17578 2.09772 4.34137 2.26435 4.43463 2.47199" fill="white" />
                                </svg>
                                <span className='ms-2'>+43 (0) 1 58802</span>
                            </a>
                            <a href="mailto:8m6Ml@example.com" className="d-flex align-items-center">
                                <svg width="19" height="15" viewBox="0 0 19 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3.18262 0C2.40562 0 1.66044 0.308663 1.11102 0.858086C0.561592 1.40751 0.25293 2.15269 0.25293 2.92969V12.0703C0.25293 12.8473 0.561592 13.5925 1.11102 14.1419C1.66044 14.6913 2.40562 15 3.18262 15H16.0732C16.8502 15 17.5954 14.6913 18.1448 14.1419C18.6943 13.5925 19.0029 12.8473 19.0029 12.0703V2.92969C19.0029 2.15269 18.6943 1.40751 18.1448 0.858086C17.5954 0.308663 16.8502 0 16.0732 0H3.18262ZM1.4248 2.92969C1.4248 2.46349 1.61 2.01638 1.93966 1.68673C2.26931 1.35707 2.71642 1.17188 3.18262 1.17188H16.0732C16.5394 1.17188 16.9865 1.35707 17.3162 1.68673C17.6459 2.01638 17.8311 2.46349 17.8311 2.92969V3.34688L9.62887 7.66406L1.4248 3.31078V2.92969ZM1.4248 4.63781L9.35324 8.84437C9.43753 8.8891 9.53146 8.91256 9.62688 8.91272C9.72229 8.91289 9.8163 8.88975 9.90074 8.84531L17.8311 4.67109V12.0703C17.8311 12.5365 17.6459 12.9836 17.3162 13.3133C16.9865 13.6429 16.5394 13.8281 16.0732 13.8281H3.18262C2.71642 13.8281 2.26931 13.6429 1.93966 13.3133C1.61 12.9836 1.4248 12.5365 1.4248 12.0703V4.63781Z" fill="white" />
                                </svg>
                                <span className='ms-2'>8m6Ml@example.com</span>
                            </a>
                        </div>
                        <div className="header_top_right">
                            <button id="languageSwitcher" className="btn btn-sm d-inline-flex align-items-center" type='button' data-bs-toggle="dropdown" aria-expanded="false">
                                <img src={images.duetschFlag} alt="Duetsch" width={20} height={13} />
                                <span className='ms-2 me-3 text-white'>Duetsch</span>
                                <svg width="9" height="6" viewBox="0 0 9 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M0.8125 0.8125L4.3125 4.3125L7.8125 0.8125" stroke="white" strokeLinecap="round" />
                                </svg>
                            </button>
                            <ul className="dropdown-menu" aria-labelledby="languageSwitcher">
                                <li><a className="dropdown-item" href="#">Deutsch</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div className="header_bottom_wrapper">
                <div className="container">
                    <div className="d-flex justify-content-between align-items-center gap-5">
                        <div className="site_branding">
                            <Link to={'/'}>
                                <img src={images.siteLogo} alt="Nebel KG" />
                            </Link>
                        </div>
                        <div className="search_form flex-grow-1">
                            <form onSubmit={submitSearch}>
                                <input
                                    type="search"
                                    name="search"
                                    id="searchInput"
                                    placeholder="Suche..."
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                />
                                <button type="submit">
                                    <svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M10.8563 11.8122L7.03272 7.98862C6.69132 8.26173 6.29872 8.47795 5.85491 8.63727C5.41109 8.79659 4.93883 8.87624 4.43812 8.87624C3.19772 8.87624 2.14805 8.44677 1.2891 7.58782C0.429701 6.72842 0 5.67852 0 4.43812C0 3.19772 0.429701 2.14782 1.2891 1.28842C2.14805 0.429474 3.19772 0 4.43812 0C5.67852 0 6.72842 0.429474 7.58782 1.28842C8.44677 2.14782 8.87624 3.19772 8.87624 4.43812C8.87624 4.93883 8.79659 5.41109 8.63727 5.85491C8.47795 6.29872 8.26173 6.69132 7.98862 7.03272L11.8293 10.8734C11.9545 10.9986 12.0171 11.1522 12.0171 11.3343C12.0171 11.5164 11.9488 11.6757 11.8122 11.8122C11.6871 11.9374 11.5277 12 11.3343 12C11.1408 12 10.9815 11.9374 10.8563 11.8122ZM4.43812 7.51067C5.29161 7.51067 6.01718 7.21206 6.61485 6.61485C7.21206 6.01718 7.51067 5.29161 7.51067 4.43812C7.51067 3.58464 7.21206 2.85906 6.61485 2.26139C6.01718 1.66418 5.29161 1.36558 4.43812 1.36558C3.58464 1.36558 2.85906 1.66418 2.26139 2.26139C1.66418 2.85906 1.36558 3.58464 1.36558 4.43812C1.36558 5.29161 1.66418 6.01718 2.26139 6.61485C2.85906 7.21206 3.58464 7.51067 4.43812 7.51067Z" fill="white" />
                                    </svg>
                                    <span className="visually-hidden">Search</span>
                                </button>
                            </form>
                        </div>
                        <div className="user_buttons d-flex align-items-center gap-3">
                            <Link to={user ? '/user/profile' : '/login'}>
                                <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13 0.5C19.9003 0.5 25.5 6.09444 25.5 12.9873C25.4999 16.7816 23.7758 20.2048 21.1201 22.5332L21.0361 22.6074C20.9413 22.68 20.8423 22.7546 20.7383 22.8311C20.6195 22.9183 20.4943 23.0099 20.375 23.1016C20.2972 23.152 20.2293 23.2043 20.1816 23.2412C20.1207 23.2884 20.0846 23.3155 20.0488 23.3369L20.0371 23.3438L20.0254 23.3516C17.9599 24.7519 15.5218 25.5005 13.0264 25.5C10.5373 25.5006 8.10505 24.7557 6.04297 23.3623C5.96457 23.2976 5.81561 23.1653 5.66797 23.0713H5.66895C5.44357 22.9135 5.23743 22.7556 5.02539 22.5908C4.98196 22.5407 4.93928 22.5102 4.91992 22.4971C2.22109 20.1982 0.500092 16.7786 0.5 12.9873C0.5 6.09444 6.09965 0.5 13 0.5ZM13 16.3057C12.359 16.3045 11.7204 16.3889 11.1016 16.5557H11.1006C10.4928 16.7214 9.93164 16.9445 9.39551 17.2549L9.38574 17.2617C9.01113 17.4906 8.63603 17.7652 8.29492 18.0654L7.97852 18.3613C7.52279 18.7886 7.15484 19.2704 6.84766 19.8008C6.53214 20.3434 6.28843 20.925 6.12207 21.5303L6.11914 21.542C6.06871 21.7437 6.00795 21.9804 5.97754 22.2236L5.94043 22.5215L6.18652 22.6943C8.11158 24.0483 10.447 24.8633 13 24.8633H13.001C15.4492 24.8594 17.8371 24.1024 19.8398 22.6943L20.0928 22.5166L20.0469 22.2109C19.9637 21.6579 19.8239 21.128 19.6279 20.624L19.623 20.6113L19.4805 20.293C19.1326 19.5618 18.6761 18.9114 18.1113 18.3467L18.1045 18.3398L17.8418 18.0996C16.5035 16.9345 14.7825 16.2939 13 16.3057ZM13 5.86328C12.3688 5.86328 11.725 5.97777 11.1309 6.24512C10.5625 6.50086 10.0424 6.84437 9.60449 7.28223C9.16764 7.71908 8.82273 8.23717 8.56641 8.80664C8.29984 9.39902 8.18428 10.0411 8.18359 10.6689C8.17741 11.2316 8.27652 11.7899 8.47363 12.3154L8.56348 12.5391C8.79569 13.113 9.14168 13.6316 9.5791 14.0684L9.58105 14.0713C10.0231 14.5062 10.5408 14.8577 11.1084 15.1074L11.1201 15.1123C12.3162 15.6038 13.6584 15.6038 14.8545 15.1123L14.8652 15.1074C15.4329 14.8577 15.9505 14.5062 16.3926 14.0713L16.3984 14.0664C16.834 13.6244 17.1843 13.1059 17.4346 12.5381C17.7003 11.9477 17.8164 11.3319 17.8164 10.6748C17.8164 10.1239 17.7284 9.56203 17.5273 9.03223L17.4336 8.80664C17.1776 8.23946 16.8328 7.71951 16.3955 7.28223L16.3945 7.28125C15.9576 6.84622 15.4381 6.50115 14.8691 6.24512C14.2763 5.97835 13.6588 5.86328 13 5.86328ZM7.36426 10.6953C7.35694 9.94404 7.50182 9.19887 7.79199 8.50586L7.79297 8.50684C8.07488 7.83929 8.48011 7.23045 8.98828 6.71387L8.99023 6.71289C9.49746 6.19303 10.1042 5.78085 10.7744 5.50098L10.7754 5.5C11.4698 5.2096 12.2161 5.06398 12.9688 5.07129H12.9795C13.638 5.06447 14.2918 5.17453 14.9102 5.39648L15.1738 5.49902C15.7577 5.7457 16.296 6.08718 16.7676 6.50879L16.9658 6.69434C17.4812 7.20585 17.8936 7.81154 18.1807 8.47852V8.47949C18.4711 9.17285 18.6177 9.91823 18.6104 10.6699V10.6816C18.6242 11.694 18.3521 12.6896 17.8262 13.5547C17.6274 13.877 17.4002 14.1806 17.1475 14.4619L16.8867 14.7354L16.8809 14.7422C16.6774 14.9504 16.452 15.1365 16.209 15.2969L15.4414 15.8027L16.2832 16.1719C16.8474 16.4192 17.3808 16.7312 17.873 17.1016C18.5149 17.5843 19.0751 18.1674 19.5303 18.8291L19.5312 18.8311C19.981 19.4807 20.3309 20.1937 20.5713 20.9463C20.5756 20.9706 20.5812 20.9916 20.5859 21.0088V22.1699L21.4404 21.3135C23.6449 19.1029 24.8841 16.1092 24.8877 12.9873L24.8838 12.6816C24.7204 6.28538 19.4395 1.11035 13 1.11035C6.45832 1.11035 1.1123 6.4512 1.1123 12.9873C1.11239 16.2445 2.44444 19.1728 4.58398 21.3379L5.44043 22.2041V21.0156L5.44434 21.0039C5.6793 20.2385 6.03302 19.5146 6.49316 18.8594C6.9594 18.2228 7.52306 17.6382 8.15723 17.1504L8.1582 17.1494C8.64805 16.7699 9.1817 16.4499 9.74707 16.1963L10.5938 15.8164L9.81055 15.3184C9.55347 15.1548 9.32193 14.9704 9.11523 14.7637C8.73784 14.3863 8.41225 14.0086 8.18555 13.6006L8.17969 13.5908L8.17383 13.582L7.99219 13.2588C7.82238 12.9298 7.68801 12.5804 7.5791 12.1992L7.57715 12.1934L7.48438 11.8359C7.40466 11.4735 7.36426 11.0948 7.36426 10.7002V10.6953Z" fill="#8B96A8" stroke="#8B96A8" />
                                </svg>
                                <span className="visually-hidden">User</span>
                            </Link>
                            <Link to='/cart'>
                                <svg width="26" height="28" viewBox="0 0 26 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M17.8349 12V6C17.8349 4.67392 17.3082 3.40215 16.3705 2.46447C15.4328 1.52678 14.161 1 12.8349 1C11.5089 1 10.2371 1.52678 9.29941 2.46447C8.36173 3.40215 7.83494 4.67392 7.83494 6V12M22.9763 9.34267L24.6603 25.3427C24.7536 26.2293 24.0603 27 23.1683 27H2.50161C2.29122 27.0002 2.08313 26.9562 1.89087 26.8708C1.69861 26.7853 1.52647 26.6604 1.38564 26.5041C1.2448 26.3478 1.13843 26.1636 1.07341 25.9635C1.0084 25.7634 0.986207 25.5519 1.00827 25.3427L2.69361 9.34267C2.73248 8.97408 2.90644 8.63294 3.18194 8.38501C3.45744 8.13708 3.81498 7.99993 4.18561 8H21.4843C22.2523 8 22.8963 8.58 22.9763 9.34267ZM8.33494 12C8.33494 12.1326 8.28226 12.2598 8.1885 12.3536C8.09473 12.4473 7.96755 12.5 7.83494 12.5C7.70233 12.5 7.57516 12.4473 7.48139 12.3536C7.38762 12.2598 7.33494 12.1326 7.33494 12C7.33494 11.8674 7.38762 11.7402 7.48139 11.6464C7.57516 11.5527 7.70233 11.5 7.83494 11.5C7.96755 11.5 8.09473 11.5527 8.1885 11.6464C8.28226 11.7402 8.33494 11.8674 8.33494 12ZM18.3349 12C18.3349 12.1326 18.2823 12.2598 18.1885 12.3536C18.0947 12.4473 17.9676 12.5 17.8349 12.5C17.7023 12.5 17.5752 12.4473 17.4814 12.3536C17.3876 12.2598 17.3349 12.1326 17.3349 12C17.3349 11.8674 17.3876 11.7402 17.4814 11.6464C17.5752 11.5527 17.7023 11.5 17.8349 11.5C17.9676 11.5 18.0947 11.5527 18.1885 11.6464C18.2823 11.7402 18.3349 11.8674 18.3349 12Z" stroke="#8B96A8" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
                                </svg>
                                <span className="visually-hidden">Cart</span>
                            </Link>
                        </div>
                        <img src={images.secondaryLogo} alt="" />
                    </div>
                </div>
            </div>
        </header>
    )
}

export default Header